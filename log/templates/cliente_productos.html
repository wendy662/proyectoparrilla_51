<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Menú</title>
    <style>
        body { font-family: "Segoe UI", Tahoma, sans-serif; background: #3a3a3a; color: #fff; margin: 0; }
        .container { padding: 20px; }
        h2 { text-align: center; color: #ffd700; }
        .productos { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-top: 30px; }
        .card { background: #2f2f2f; border-radius: 10px; padding: 15px; text-align: center; box-shadow: 0 2px 6px rgba(0,0,0,0.4); }
        .card img { width: 100%; height: 150px; object-fit: cover; border-radius: 8px; }
        .btn { margin-top: 10px; display: block; padding: 10px; background: #ffd700; color: #000; font-weight: bold; border-radius: 6px; text-decoration: none; }
        .btn:hover { background: #e0b800; }
        a.volver { display: block; margin-top: 20px; text-align: center; color: #ff4444; text-decoration: none; }

        .filtros {
    text-align: center;       /* Centra los botones */
    margin: 30px 0 20px 0;    /* Baja los botones */
}

.filtros button {
    background: transparent;   /* Fondo transparente */
    color: #ffd700;            /* Texto dorado */
    border: 2px solid #ffd700; /* Borde dorado */
    border-radius: 25px;       /* Bordes redondos */
    padding: 14px 20px;        /* Tamaño más grande */
    margin: 8px;               /* Espacio entre botones */
    font-size: 16px;           /* Texto más grande */
    font-weight: bold;         /* Texto en negrita */
    cursor: pointer;           /* Manito al pasar */
    transition: all 0.3s ease; /* Animación suave */
}

.filtros button:hover {
    background: #ffd700;       /* Fondo dorado al pasar */
    color: #000;               /* Texto negro al pasar */
    transform: scale(1.1);     /* Hace zoom leve */
}

#imagen-fondo {
        display: flex;
        justify-content: center;
        margin-top: 100px;   /* 🔽 baja la vaca */
    }

    #imagen-fondo img {
        width: 600px;        /* 🔍 agranda la vaca */
        height: auto;        /* mantiene proporción */
        opacity: 0.3;
    }

    #imagen-fondo.oculto {
        display: none !important;
    }

    p { text-align:center; margin-top:15px; }
    a {
      text-decoration:none;
      color:#ff4444;
      font-weight:bold;
      transition:color 0.2s;
      font-size: 150%;
    }
    a:hover { color:#cc0000; }


    </style>
</head>
<body>
     <!-- Botones para filtrar -->
        <div class="filtros">
            <button onclick="filtrar('cerdo')">Cerdo</button>
            <button onclick="filtrar('res')">Res</button>
            <button onclick="filtrar('pollo')">Pollo</button>
            <button onclick="filtrar('plato del dia')">Plato del día</button>
            <button onclick="filtrar('acompañamientos')">Acompañamientos</button>
            <button onclick="filtrar('entradas')">Entradas</button>
            <button onclick="filtrar('platos combinados')">Platos combinados</button>
            <button onclick="filtrar('cortes gruesos')">Cortes gruesos</button>
            <button onclick="filtrar('bebidas')">Bebidas</button>
            <button onclick="filtrar('adicionales')">Adicionales</button>
        </div>
        <div id="imagen-fondo">
    <img src="{{ url_for('static', filename='img/Vaca.png') }}" alt="vaca">
</div>


        <!-- Lista de productos -->
        <div class="productos">
            {% for p in productos %}
            <div class="card producto-card" 
                 data-categoria="{{ p.get('nombre_categoria', 'sin categoría') | trim | lower }}"
                 style="display:none;">   <!-- ocultar por defecto -->

                {% if p.imagen %}
                    <img src="{{ url_for('static', filename='uploads/' ~ p.imagen) }}" alt="{{ p.nombre }}">
                {% else %}
                    <img src="{{ url_for('static', filename='no-image.png') }}" alt="{{ p.nombre }}">
                {% endif %}

                <h3>{{ p.nombre }}</h3>
                <p><strong>Precio:</strong> COP ${{ "{:,.0f}".format(p.precio).replace(",", ".") }}</p>
                <p><strong>Categoría:</strong> {{ p.get('nombre_categoria', 'Sin categoría') }}</p>
                <p><strong>Descripción:</strong> {{ p.get('descripcion', 'Sin descripción') }}</p>

                <form method="POST" action="{{ url_for('agregar_carrito', id_producto=p.id_producto) }}">
                    <input type="number" name="cantidad" value="1" min="1" style="width:60px;">
                    <button type="submit" class="btn">🛒 Agregar</button>
                </form>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Script que hace el filtro -->
    <script>
    function filtrar(categoria) {

        localStorage.setItem("filtroSeleccionado", categoria);
        // Filtrar productos
        document.querySelectorAll(".producto-card").forEach(el => {
            if (el.dataset.categoria === categoria) {
                el.style.display = "block";  
            } else {
                el.style.display = "none";   
            }
        });

        // Ocultar la vaca al hacer clic en cualquier filtro
        document.getElementById("imagen-fondo").classList.add("oculto");
    }
</script>
<script>
window.onload = function() {
    const filtroGuardado = localStorage.getItem("filtroSeleccionado");
    if (filtroGuardado) {
        filtrar(filtroGuardado);
    }
}
</script>

<p><a href="{{ url_for('cliente_dashboard') }}">Volver</a></p>
</body>
</html>

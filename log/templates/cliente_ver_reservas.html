<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Hacer Reserva</title>
    <style>
        body { 
            font-family: "Segoe UI", Tahoma, sans-serif; 
            background: #3a3a3a; 
            color: #fff; 
            margin: 0; 
        }

        .reservas-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 50px;
            margin-left: 40px;
        }

        .reserva-card {
            background-color: #2c2c2c;
            color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgb(246, 185, 30);
            width: 250px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .reserva-card:hover {
            transform: scale(1.05); 
        }
        .reserva-card h3 {
            margin-top: 0px;
            text-align: center;
        }

        .btn-cancelar {
            background-color: #e74c3c;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
            display: block;
            margin: 0 auto; 

        }

        .btn-cancelar:hover {
            background-color: #c0392b;
        }
        </style>

</head>
<body>
    <h2 style="text-align: center; font-size: 30px">Mis Reservas</h2>

{% if reservas %}
<div class="reservas-container">
    {% for r in reservas %}
    <div class="reserva-card">
        <h3>Reserva #{{ r.id_reserva }}</h3>
        <p><strong>Nombre:</strong> {{ r.nombre or "No asignado" }}</p>
        <p><strong>Fecha:</strong> {{ r.fecha }}</p>
        <p><strong>Hora:</strong> {{ r.hora }}</p>
        <p><strong>Personas:</strong> {{ r.cant_personas }}</p>
        <p><strong>Mesa:</strong> {{ r.cod_mesa }}</p>
        <p><strong>Estado:</strong> {{ r.estado or "pendiente" }}</p>

        <!-- Botón cancelar con confirmación -->
        <form action="{{ url_for('cancelar_reserva', id=r.id_reserva) }}" method="POST"
              onsubmit="return confirmarCancelacion()">
            <button type="submit" class="btn-cancelar">Cancelar</button>
        </form>
    </div>
    {% endfor %}
</div>
{% else %}
<p>No tienes reservas registradas.</p>
{% endif %}

<!-- Script de confirmación -->
<script>
function confirmarCancelacion() {
    return confirm("⚠️ ¿Estás seguro de que deseas cancelar esta reserva?");
}
</script>

</body>
</html>
